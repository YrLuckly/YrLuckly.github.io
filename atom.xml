<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Rafael</title>
  
  <subtitle>All the glory of life, to the end of the lonely repayment.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://fireworksrain.com/"/>
  <updated>2018-11-25T09:08:59.029Z</updated>
  <id>http://fireworksrain.com/</id>
  
  <author>
    <name>Mr Zuo</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>linux下安装Django</title>
    <link href="http://fireworksrain.com/linux%E4%B8%8B%E5%AE%89%E8%A3%85Django/"/>
    <id>http://fireworksrain.com/linux下安装Django/</id>
    <published>2018-11-25T09:05:19.000Z</published>
    <updated>2018-11-25T09:08:59.029Z</updated>
    
    <content type="html"><![CDATA[<h1 id="基于安装python安装django"><a href="#基于安装python安装django" class="headerlink" title="基于安装python安装django"></a>基于安装python安装django</h1><h3 id="非常简答"><a href="#非常简答" class="headerlink" title="非常简答"></a>非常简答</h3><h3 id="前提是安装好Python"><a href="#前提是安装好Python" class="headerlink" title="前提是安装好Python"></a>前提是安装好Python</h3><p><code>pip3 install django==1.11.14</code></p><blockquote><p>接下来就是最基本的django的创建和运行<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">创建django项目</span><br><span class="line">django-admin startproject mysite</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">修改django settings.<span class="keyword">py</span>配置文件，不知道可以用<span class="keyword">find</span>查找</span><br><span class="line">ALLOWED_HOSTS = [<span class="string">'*'</span>]</span><br><span class="line">启动django</span><br><span class="line"></span><br><span class="line"><span class="keyword">python3</span> manage.<span class="keyword">py</span> runserver <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">9000</span></span><br></pre></td></tr></table></figure></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;基于安装python安装django&quot;&gt;&lt;a href=&quot;#基于安装python安装django&quot; class=&quot;headerlink&quot; title=&quot;基于安装python安装django&quot;&gt;&lt;/a&gt;基于安装python安装django&lt;/h1&gt;&lt;h3 id=&quot;非
      
    
    </summary>
    
      <category term="Linux" scheme="http://fireworksrain.com/categories/Linux/"/>
    
    
      <category term="Django" scheme="http://fireworksrain.com/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>Linux常用部署之MySQL(mariadb)</title>
    <link href="http://fireworksrain.com/Linux%E5%B8%B8%E7%94%A8%E9%83%A8%E7%BD%B2%E4%B9%8BMySQL-mariadb/"/>
    <id>http://fireworksrain.com/Linux常用部署之MySQL-mariadb/</id>
    <published>2018-11-23T00:42:12.000Z</published>
    <updated>2018-11-23T00:55:08.629Z</updated>
    
    <content type="html"><![CDATA[<p>观沧海<br>两汉：曹操</p><p>东临碣石，以观沧海。<br>水何澹澹，山岛竦峙。<br>树木丛生，百草丰茂。<br>秋风萧瑟，洪波涌起。<br>日月之行，若出其中；<br>星汉灿烂，若出其里。<br>幸甚至哉，歌以咏志。</p><h2 id="mariadb的安装与其他设置"><a href="#mariadb的安装与其他设置" class="headerlink" title="mariadb的安装与其他设置"></a>mariadb的安装与其他设置</h2><h4 id="1-添加MariaDb-yum-仓库"><a href="#1-添加MariaDb-yum-仓库" class="headerlink" title="1.添加MariaDb yum 仓库"></a>1.添加MariaDb yum 仓库</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、首先在 RHEL/CentOS 和 Fedora 操作系统中添加 MariaDB 的 YUM 配置文件 MariaDB<span class="selector-class">.repo</span> 文件。</span><br><span class="line">#编辑创建mariadb.repo仓库文件</span><br><span class="line">vi /etc/yum<span class="selector-class">.repos</span><span class="selector-class">.d</span>/MariaDB.repo</span><br></pre></td></tr></table></figure><h4 id="1-1-添加repo仓库配置"><a href="#1-1-添加repo仓库配置" class="headerlink" title="1.1 添加repo仓库配置"></a>1.1 添加repo仓库配置</h4><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mariadb]</span></span><br><span class="line"><span class="attr">name</span> = MariaDB</span><br><span class="line"><span class="attr">baseurl</span> = http://yum.mariadb.org/<span class="number">10.1</span>/centos7-amd64</span><br><span class="line"><span class="attr">gpgkey</span>=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB</span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="2-在CentOS7中安装MariaDB"><a href="#2-在CentOS7中安装MariaDB" class="headerlink" title="2 在CentOS7中安装MariaDB"></a>2 在CentOS7中安装MariaDB</h4><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span>、当 <span class="keyword">MariaDB </span>仓库地址添加好后，你可以通过下面的一行命令轻松安装 <span class="keyword">MariaDB。</span></span><br><span class="line"><span class="keyword">yum </span>install <span class="keyword">MariaDB-server </span><span class="keyword">MariaDB-client </span>-y</span><br></pre></td></tr></table></figure><h4 id="3-启动mariadb相关命令"><a href="#3-启动mariadb相关命令" class="headerlink" title="3.启动mariadb相关命令"></a>3.启动mariadb相关命令</h4><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mariadb数据库的相关命令是：</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">systemctl </span>start <span class="keyword">mariadb </span> #启动<span class="keyword">MariaDB</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">systemctl </span>stop <span class="keyword">mariadb </span> #停止<span class="keyword">MariaDB</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">systemctl </span>restart <span class="keyword">mariadb </span> #重启<span class="keyword">MariaDB</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">systemctl </span>enable <span class="keyword">mariadb </span> #设置开机启动</span><br></pre></td></tr></table></figure><p>启动后正常使用mysql<br><code>systemctl start mariadb</code></p><h3 id="初始化mysql-必要操作！！"><a href="#初始化mysql-必要操作！！" class="headerlink" title="初始化mysql(必要操作！！)"></a>初始化mysql(必要操作！！)</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">在确认 <span class="keyword">MariaDB </span>数据库软件程序安装完毕并成功启动后请不要立即使用。为了确保数据 库的安全性和正常运转，需要先对数据库程序进行初始化操作。这个初始化操作涉及下面 <span class="number">5</span> 个 步骤。</span><br><span class="line">➢ 设置 root 管理员在数据库中的密码值(注意，该密码并非 root 管理员在系统中的密 码，这里的密码值默认应该为空，可直接按回车键)。</span><br><span class="line">➢ 设置 root 管理员在数据库中的专有密码。</span><br><span class="line">➢ 随后删除匿名账户，并使用 root 管理员从远程登录数据库，以确保数据库上运行的业</span><br><span class="line">务的安全性。</span><br><span class="line">➢ 删除默认的测试数据库，取消测试数据库的一系列访问权限。</span><br><span class="line">➢ 刷新授权列表，让初始化的设定立即生效。</span><br></pre></td></tr></table></figure><p><strong>必须在确保mariadb服务器启动后，执行初始化命令</strong><br><code>mysql_secure_installation</code><br>操作如下图：<br><img src="en-resource://database/928:1" alt="d93ba463132a07b9f7fefd6df7a8fb4e.png"></p><h3 id="mysql基础命令"><a href="#mysql基础命令" class="headerlink" title="mysql基础命令"></a>mysql基础命令</h3><p>mysql创建普通用户：</p><pre><code>#修改mysql密码MariaDB [(none)]&gt; set password = PASSWORD(&apos;redhat123&apos;);生产环境里不会死磕root用户，为了数据库的安全以及和其他用户协同管理数据库，就需要创建其他数据库账户，然后分配权限，满足工作需求。</code></pre><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; <span class="keyword">create</span> <span class="keyword">user</span> yuchao@<span class="string">'127.0.0.1'</span> identified <span class="keyword">by</span> <span class="string">'redhat123'</span>;</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use mysql;</span><br><span class="line"></span><br><span class="line">MariaDB [mysql]&gt; <span class="keyword">select</span> host,<span class="keyword">user</span>,<span class="keyword">password</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> <span class="keyword">user</span>=<span class="string">'yuchao'</span>;</span><br><span class="line">切换普通用户yuchao，查看数据库信息，发现无法看到完整的数据库列表</span><br><span class="line"></span><br><span class="line">[root@master ~]# mysql -uyuchao -p -h 127.0.0.1</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br></pre></td></tr></table></figure><h3 id="数据库权限设置"><a href="#数据库权限设置" class="headerlink" title="数据库权限设置"></a>数据库权限设置</h3><p><code>mysql使用grant命令对账户进行授权，grant命令常见格式如下</code><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> 权限 <span class="keyword">on</span> 数据库.表名 <span class="keyword">to</span> 账户@主机名            对特定数据库中的特定表授权</span><br><span class="line"><span class="keyword">grant</span> 权限 <span class="keyword">on</span> 数据库.* <span class="keyword">to</span> 账户@主机名            　　对特定数据库中的所有表给与授权</span><br><span class="line"><span class="keyword">grant</span> 权限<span class="number">1</span>,权限<span class="number">2</span>,权限<span class="number">3</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> 账户@主机名   　　 对所有库中的所有表给与多个授权</span><br><span class="line"><span class="keyword">grant</span> all <span class="keyword">privileges</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> 账户@主机名   　　 对所有库和所有表授权所有权限</span><br></pre></td></tr></table></figure></p><p>退出数据库，使用root登录，开始权限设置<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[root@master ~]</span># <span class="selector-tag">mysql</span> <span class="selector-tag">-uroot</span> <span class="selector-tag">-p</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">MariaDB</span> <span class="selector-attr">[(none)]</span>&gt; <span class="selector-tag">use</span> <span class="selector-tag">mysql</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">MariaDB</span> <span class="selector-attr">[(none)]</span>&gt; <span class="selector-tag">grant</span> <span class="selector-tag">all</span> <span class="selector-tag">privileges</span> <span class="selector-tag">on</span> *.* <span class="selector-tag">to</span> <span class="selector-tag">yuchao</span>@<span class="keyword">127</span>.<span class="keyword">0</span>.<span class="keyword">0</span>.<span class="keyword">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">MariaDB</span> <span class="selector-attr">[mysql]</span>&gt; <span class="selector-tag">show</span> <span class="selector-tag">grants</span> <span class="selector-tag">for</span> <span class="selector-tag">yuchao</span>@<span class="keyword">127</span>.<span class="keyword">0</span>.<span class="keyword">0</span>.<span class="keyword">1</span>;</span><br></pre></td></tr></table></figure></p><p>移除权限<br><code>MariaDB [(none)]&gt; revoke all privileges on *.* from yuchao@127.0.0.1;</code></p><h3 id="配置mysql"><a href="#配置mysql" class="headerlink" title="配置mysql"></a>配置mysql</h3><h4 id="1-中文编码设置，编辑mysql配置文件-etc-my-cnf-填写一下内容"><a href="#1-中文编码设置，编辑mysql配置文件-etc-my-cnf-填写一下内容" class="headerlink" title="1.中文编码设置，编辑mysql配置文件/etc/my.cnf,填写一下内容"></a>1.中文编码设置，编辑mysql配置文件/etc/my.cnf,填写一下内容</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">character-<span class="keyword">set</span>-<span class="keyword">server</span>=utf8</span><br><span class="line"><span class="keyword">collation</span>-<span class="keyword">server</span>=utf8_general_ci</span><br><span class="line"><span class="keyword">log</span>-<span class="keyword">error</span>=/<span class="keyword">var</span>/<span class="keyword">log</span>/mysqld.log</span><br><span class="line">[<span class="keyword">client</span>]</span><br><span class="line"><span class="keyword">default</span>-<span class="built_in">character</span>-<span class="keyword">set</span>=utf8</span><br><span class="line">[mysql]</span><br><span class="line"><span class="keyword">default</span>-<span class="built_in">character</span>-<span class="keyword">set</span>=utf8</span><br></pre></td></tr></table></figure><h4 id="2-授权设置"><a href="#2-授权设置" class="headerlink" title="2.授权设置"></a>2.授权设置</h4><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">远程连接设置哦设置所有库，所有表的所有权限，赋值权限给所有ip地址的root用户mysql &gt; grant all privileges <span class="keyword">on</span> *.* <span class="keyword">to</span> root@<span class="string">'%'</span> identified <span class="keyword">by</span> <span class="string">'password'</span>;#创建用户mysql &gt; <span class="keyword">create</span> user <span class="string">'username'</span>@<span class="string">'%'</span> identified <span class="keyword">by</span> <span class="string">'password'</span>;#刷新权限flush privileges;</span><br></pre></td></tr></table></figure><h3 id="数据库备份与恢复"><a href="#数据库备份与恢复" class="headerlink" title="数据库备份与恢复"></a>数据库备份与恢复</h3><ul><li>mysqldump命令用于备份数据库数据<br><code>[root@master ~]# mysqldump -u root -p --all-databases &gt; /tmp/db.dump</code></li><li><p>进入mariadb数据库，删除一个db</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="keyword">master</span> <span class="title">~]# mysql</span> -uroot -p</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; drop database s11;</span><br></pre></td></tr></table></figure></li><li><p>进行数据恢复，把刚才重定向备份的数据库文件导入到mysql中<br><code>[root@master ~]# mysql -uroot -p &lt; /tmp/db.dump</code></p><h3 id="mysql远程登陆授权配置"><a href="#mysql远程登陆授权配置" class="headerlink" title="mysql远程登陆授权配置"></a>mysql远程登陆授权配置</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">注意！关闭防火墙。、。。。。这样就不会再出莫名其妙的bug了。。。</span><br><span class="line">iptables -F  <span class="comment">#清空防火墙规则</span></span><br><span class="line"><span class="comment">#关闭防火墙 </span></span><br><span class="line">systemctl <span class="keyword">stop</span> firewalld</span><br><span class="line"><span class="comment">#永久关闭防火墙开机自启</span></span><br><span class="line">systemctl <span class="keyword">disable</span> firewalld</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>新建一个用于远程登录的账户</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">'username'</span>@<span class="string">'%'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'password'</span>;</span><br><span class="line">2.给与账户远程登录的权限，授权</span><br><span class="line"><span class="keyword">grant</span> all <span class="keyword">privileges</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> <span class="string">'username'</span>@<span class="string">'%'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'password'</span>;</span><br><span class="line">3.刷新权限表，防止不生效</span><br><span class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span>;</span><br><span class="line">4.此时可以在windows登录你的linux数据库拉！！！！</span><br></pre></td></tr></table></figure></li></ul><h3 id="mysql主从同步配置（重点）"><a href="#mysql主从同步配置（重点）" class="headerlink" title="mysql主从同步配置（重点）"></a>mysql主从同步配置（重点）</h3><h4 id="1-主库设置配置："><a href="#1-主库设置配置：" class="headerlink" title="1.主库设置配置："></a>1.主库设置配置：</h4><ol><li><p>修改配置文件，开启主从同步的功能<br> 1.修改配置文件</p><pre><code>`vim /etc/my.cnf`</code></pre><p> 2.修改内容</p> <figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">server-id</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">log-bin</span>=mysql-bin</span><br></pre></td></tr></table></figure><p> 3.重启mariadb<br> <code>systemctl start mariadb</code><br> 4.重启后，mysql主库已经开启同步功能，创建了mysql-bin日志文件</p></li><li><p>创建用于主从同步的账号<br><code>create user &#39;username&#39;@&#39;%&#39; identified by &#39;password&#39;;</code></p></li><li>给与账号slave的权限<br>grant replication slave on <em>.</em> to ‘username‘@’%’;</li><li>检查一下主库创建的账号信息<br>select user,host from mysql.user;</li><li>检查授权账号的权限信息<br>show grants for username@’%’;</li><li>实现主库的锁表，防止数据写入<br>flush table with read lock;</li><li>此时可以检查主库的日志状态，已经锁表了，防止日志位置发生变化<br>show master status;</li><li>开始数据备份，导出主库的已经存在的数据，然后用于从库写入<br>mysqldump -uroot -p  –all-databases &gt; /data/my_all.dump</li><li>将主库的数据备份文件，scp到从库机器上，然后从库mysql导入数据<br>scp /tmp/all.dump <a href="mailto:root@10.0.0.11" target="_blank" rel="noopener">root@10.0.0.11</a>:/opt/</li></ol><h4 id="2-从库的设置："><a href="#2-从库的设置：" class="headerlink" title="2.从库的设置："></a>2.从库的设置：</h4><pre><code>1. 在从库中导入主库的最新数据，以便于素具一致性        1.登录slave数据库        2.删除slave当前机器所有的database，清空database数据，为了保证从库干净        3.登录数据库，导入数据            `source /opt/all.dump`2. 修改配置文件，添加用于同步的配置，</code></pre><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/<span class="keyword">my</span>.cnf   写入配置</span><br><span class="line">server-<span class="built_in">id</span>=<span class="number">5</span></span><br></pre></td></tr></table></figure><pre><code>3. 重启mariadb 从库</code></pre><p><code>systemctl restart mariadb</code></p><pre><code>4. 检查从库的各项参数</code></pre><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'log_bin'</span>;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'server_id'</span>;</span><br></pre></td></tr></table></figure><blockquote><p>5.通过此命令，将slave库同于master库</p></blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">change master <span class="keyword">to</span> <span class="attribute">master_host</span>=<span class="string">'10.0.0.10'</span>,</span><br><span class="line"><span class="attribute">master_user</span>=<span class="string">'bhf'</span>,</span><br><span class="line"><span class="attribute">master_password</span>=<span class="string">'bhfdsb'</span>,</span><br><span class="line"><span class="attribute">master_log_file</span>=<span class="string">'mysql-bin.000001'</span>,</span><br><span class="line"><span class="attribute">master_log_pos</span>=1485;</span><br></pre></td></tr></table></figure><blockquote><p>6.开启主从同步的开关<br>    <code>start slave;</code></p></blockquote><blockquote><p>7.检查复制的状态<br>        <code>show slave status\G</code></p></blockquote><blockquote><p>8.检查从库通过不得两条参数，均为yes确认同步成功</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Slave_IO_Running:</span> <span class="literal">Yes</span></span><br><span class="line"><span class="attr">Slave_SQL_Running:</span> <span class="literal">Yes</span></span><br></pre></td></tr></table></figure><blockquote><p>9.此时已经确认主从同步配置ok，前往主库解锁数据库，然后数据写入查看结果</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">master上：</span><br><span class="line"><span class="keyword">unlock</span> <span class="keyword">tables</span>;  解锁数据库</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;观沧海&lt;br&gt;两汉：曹操&lt;/p&gt;
&lt;p&gt;东临碣石，以观沧海。&lt;br&gt;水何澹澹，山岛竦峙。&lt;br&gt;树木丛生，百草丰茂。&lt;br&gt;秋风萧瑟，洪波涌起。&lt;br&gt;日月之行，若出其中；&lt;br&gt;星汉灿烂，若出其里。&lt;br&gt;幸甚至哉，歌以咏志。&lt;/p&gt;
&lt;h2 id=&quot;mariadb的安装
      
    
    </summary>
    
      <category term="Linux" scheme="http://fireworksrain.com/categories/Linux/"/>
    
    
      <category term="MySQL" scheme="http://fireworksrain.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>Nginx入门</title>
    <link href="http://fireworksrain.com/Nginx%E5%85%A5%E9%97%A8/"/>
    <id>http://fireworksrain.com/Nginx入门/</id>
    <published>2018-11-22T09:31:32.000Z</published>
    <updated>2018-11-23T00:55:12.867Z</updated>
    
    <content type="html"><![CDATA[<p>三五七言 / 秋风词</p><p>唐代：李白</p><p>秋风清，秋月明，<br>落叶聚还散，寒鸦栖复惊。<br>相思相见知何日？此时此夜难为情！<br>入我相思门，知我相思苦，<br>长相思兮长相忆，短相思兮无穷极，<br>早知如此绊人心，何如当初莫相识。</p><hr><h3 id="Web服务访问流程："><a href="#Web服务访问流程：" class="headerlink" title="Web服务访问流程："></a>Web服务访问流程：</h3><blockquote><p>dns解析流程：<br>1.你要输入域名  pythonav.cn<br>    2.你的机器首先在/etc/hosts文件中查找解析记录<br>    3.会去本地dns缓存中查找记录，LDNS<br>    4.就去/etc/resolv.conf去找到指定的公网dns服务器<br>    5.假设你dns服务器是119.29.29.29<br>        通过119.29.29.29找到对应的记录<br>        pythonav.cn    123.206.16.61<br>    6.找到记录后，机器会将此记录，缓存到LDNS中，用于下次加速解析<br>    7.浏览器访问对应的ip ，123.206.16.61，发起http请求</p></blockquote><h3 id="nginx的介绍"><a href="#nginx的介绍" class="headerlink" title="nginx的介绍"></a>nginx的介绍</h3><blockquote><p>支持高并发，能支持几万并发连接资源消耗少，在3万并发连接下开启10个nginx线程消耗的内存不到200M可以做http反向代理和负载均衡支持异步网络i/o事件模型epoll</p></blockquote><h3 id="安装、启动nginx"><a href="#安装、启动nginx" class="headerlink" title="安装、启动nginx"></a>安装、启动nginx</h3><ol><li>安装前准备<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install </span>gcc patch libffi-devel python-devel  zlib-devel <span class="keyword">bzip2-devel </span>openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel openssl openssl-devel -y</span><br></pre></td></tr></table></figure></li></ol><p>2.下载源码包<br><code>wget -c https://nginx.org/download/nginx-1.12.0.tar.gz</code><br>3.解压源码<br><code>tar -zxvf nginx-1.12.0.tar.gz</code><br>4.配置，编译安装<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> nginx1-<span class="number">12</span></span><br><span class="line"></span><br><span class="line">./configure --prefix=/<span class="keyword">opt</span>/nginx1-<span class="number">12</span>/</span><br><span class="line"></span><br><span class="line"><span class="keyword">make</span> &amp;&amp; <span class="keyword">make</span> install</span><br></pre></td></tr></table></figure></p><p>5.启动nginx，进入sbin目录，找到启动命令<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> sbin</span><br><span class="line"><span class="string">./nginx</span> <span class="comment">#启动</span></span><br><span class="line"><span class="string">./nginx</span> -s stop <span class="comment">#关闭</span></span><br><span class="line"><span class="string">./nginx</span> -s <span class="keyword">reload</span> <span class="comment">#重新加载</span></span><br></pre></td></tr></table></figure></p><p>6.检查<br><code>netstat -tunlp |grep 80</code></p><h3 id="Nginx的目录结构"><a href="#Nginx的目录结构" class="headerlink" title="Nginx的目录结构"></a>Nginx的目录结构</h3><blockquote><p>在nginx1-12中输入ls</p></blockquote><ol><li>conf 存放nginx所有配置文件的目录，主要会用到nginx.conf</li><li>html 存放nginx默认站点的目录，如index.html、error.html等</li><li>logs 存放nginx默认日志的目录，如error.log， access.log</li><li>sbin 存放nginx朱命令的目录，sbin/nginx (在这目录下启动)<h3 id="Nginx虚拟主机实战"><a href="#Nginx虚拟主机实战" class="headerlink" title="Nginx虚拟主机实战"></a>Nginx虚拟主机实战</h3><blockquote><p>虚拟主机的类型</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">基于域名的虚拟主机</span><br><span class="line">通过不同的域名区分不同的虚拟主机，是企业应用最广的虚拟主机</span><br><span class="line"></span><br><span class="line">基于端口的虚拟主机</span><br><span class="line">通过不同的端口来区分不同的虚拟主机，一般用作企业内部网站，不对外直接提供服务的后台，例如www.pythonav.cn:<span class="number">9000</span></span><br><span class="line"></span><br><span class="line">基于<span class="built_in">IP</span>的虚拟主机</span><br><span class="line">通过不同的<span class="built_in">IP</span>区分不同的虚拟主机，此类比较少见，一般业务需要多<span class="built_in">IP</span>的常见都会在负载均衡中绑定VIP</span><br></pre></td></tr></table></figure></blockquote></li></ol><blockquote><p>基于域名的虚拟主机实战nginx可以自动识别用户请求的域名，根据不同的域名请求服务器传输不同的内容，只需要保证服务器上有一个可用的ip地址，配置好dns解析服务。</p></blockquote><h4 id="基于一个ip地址的一个域名访问"><a href="#基于一个ip地址的一个域名访问" class="headerlink" title="基于一个ip地址的一个域名访问"></a>基于一个ip地址的一个域名访问</h4><blockquote><p>修改nginx.conf<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@oldboy_python ~ 14:33:16]#egrep -v &apos;#|^$&apos; /opt/nginx1-12/conf/nginx.conf</span><br><span class="line">worker_processes  1;</span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line">    access_log  logs/access.log  main;</span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  www.diyi.com;</span><br><span class="line">        location /&#123;</span><br><span class="line">            root   html/pyyuc;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>创建diyi.com的站点目录和文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@oldboy_python /opt/nginx1-12/html 14:36:08]#mkdir diyi</span><br><span class="line">[root@oldboy_python /opt/nginx1-12/html 14:36:18]#echo &quot;&lt;meta charset=utf8&gt;我是diyi站点&quot; &gt; diyi/index.html</span><br><span class="line">[root@oldboy_python /opt/nginx1-12/html 14:37:21]#cat diyi/index.html</span><br><span class="line">&lt;meta charset=utf8&gt;我是diyi站点</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>完成后重启nginx,就可以访问了<br><code>./nginx -s reload</code></p></blockquote><h4 id="基于同一ip访问多个域名"><a href="#基于同一ip访问多个域名" class="headerlink" title="基于同一ip访问多个域名"></a>基于同一ip访问多个域名</h4><blockquote><p><strong>新增一个新的server{}</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">egrep -v &apos;#|^$&apos; /opt/nginx1-12/conf/nginx.conf</span><br><span class="line">worker_processes  1;</span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line">    access_log  logs/access.log  main;</span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  www.pyyuc.cn;</span><br><span class="line">        location /&#123;</span><br><span class="line">            root   html/pyyuc;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  www.pythonav.cn;</span><br><span class="line">        location /&#123;</span><br><span class="line">            root   html/pythonav;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>创建第二模拟主机站点的目录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@oldboy_python /opt/nginx1-12 14:47:21]#mkdir -p /opt/nginx1-12/html/pythonav</span><br><span class="line">[root@oldboy_python /opt/nginx1-12 14:49:33]#echo &quot;&lt;meta charset=utf8&gt;我是pythonav，未成年禁止入内&quot;&gt; /opt/nginx1-12/html/pythonav/index.html</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>重启，输入域名</p></blockquote><h3 id="nginx访问日志（access-log）"><a href="#nginx访问日志（access-log）" class="headerlink" title="nginx访问日志（access_log）"></a>nginx访问日志（access_log）</h3><blockquote></blockquote><p>日志功能对每个用户访问网站的日志信息记录到指定的日志文件里，开发运维人员可以分析用户的浏览器行为，此功能由ngx_http_log_module模块负责，<a href="http://nginx.org/en/docs/http/ngx_http_log_module.html" target="_blank" rel="noopener">官方文档</a><br>控制日志的参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">log_format    记录日志的格式，可定义多种格式</span><br><span class="line">accsss_log    指定日志文件的路径以及格式　　log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">　　&apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">　　&apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br></pre></td></tr></table></figure></p><p>对应参数解析<br><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">$remote</span>_addr    记录客户端ip</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">$remote</span>_user    远程用户，没有就是 “-”</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">$time</span>_local 　　 对应[14/Aug/2018:18:46:52 +0800]</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">$request</span>　　　 　对应请求信息"GET /favicon.ico HTTP/1.1"</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">$status</span>　　　  　状态码</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">$body</span>_bytes_sent　　571字节 请求体的大小</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">$http</span>_referer　　对应“-”　　由于是直接输入浏览器就是 -</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">$http</span>_user_agent　　客户端身份信息</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">$http</span>_x_forwarded_for　　记录客户端的来源真实ip 97.64.34.118</span></span><br></pre></td></tr></table></figure></p><blockquote><p>nginx.conf默认配置<br><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">log_format  main  <span class="string">'<span class="variable">$remote_addr</span> - <span class="variable">$remote_user</span> [<span class="variable">$time_local</span>] "<span class="variable">$request</span>" '</span></span><br><span class="line">                      <span class="string">'<span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> "<span class="variable">$http_referer</span>" '</span></span><br><span class="line">                      <span class="string">'"<span class="variable">$http_user_agent</span>" "<span class="variable">$http_x_forwarded_for</span>"'</span><span class="comment">;</span></span><br><span class="line"></span><br><span class="line"> access_log  logs/access.log  main<span class="comment">;</span></span><br><span class="line"> </span><br><span class="line">log_format是日志关键字参数，不能变</span><br><span class="line">main是日志格式指定的标签，记录日志时通过main标签选择指定的格式。</span><br></pre></td></tr></table></figure></p></blockquote><h3 id="限制网站来源ip访问"><a href="#限制网站来源ip访问" class="headerlink" title="限制网站来源ip访问"></a>限制网站来源ip访问</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">限制ip或ip段访问</span><br><span class="line">location / &#123;</span><br><span class="line">deny <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span>;</span><br><span class="line">deny <span class="number">192.168</span><span class="number">.1</span><span class="number">.0</span>/<span class="number">24</span>;</span><br><span class="line">allow <span class="number">10.1</span><span class="number">.1</span><span class="number">.0</span>/<span class="number">16</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Nginx错误页面优化"><a href="#Nginx错误页面优化" class="headerlink" title="Nginx错误页面优化"></a>Nginx错误页面优化</h3><blockquote><p>自定义一个错误404页面<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  www.pythonav.cn;</span><br><span class="line">        root html/pythonav;</span><br><span class="line">        location /&#123;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;　　　　　　#在pythonav路径下的40x.html错误页面</span><br><span class="line">        error_page 400 403 404 405 /40x.html;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></p></blockquote><h3 id="Nginx反向代理"><a href="#Nginx反向代理" class="headerlink" title="Nginx反向代理"></a>Nginx反向代理</h3><blockquote><p>1.正向代理的概念<br>    正向代理，实际应用在，vpn代理ip<br>    那么用户在家的时候，通过一个代理ip，连接上公司的内网环境<br>    这个ip就是一个正向代理ip</p></blockquote><blockquote><p>2.反向代理<br>    1.用户发起请求  pythonav.cn/login/ ，访问到nginx服务器，告诉nginx，我要登录</p><pre><code>2. nginx 作为一个中间代理，他不做处理，他把这请求，直接扔给后面的应用服务器,django 3.django接收到login请求，处理请求，返回请求再给nginx4.nginx返回处理完毕的页面，数据，返回给用户/浏览器5.客户/浏览器得到一个处理完毕的结果</code></pre></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;三五七言 / 秋风词&lt;/p&gt;
&lt;p&gt;唐代：李白&lt;/p&gt;
&lt;p&gt;秋风清，秋月明，&lt;br&gt;落叶聚还散，寒鸦栖复惊。&lt;br&gt;相思相见知何日？此时此夜难为情！&lt;br&gt;入我相思门，知我相思苦，&lt;br&gt;长相思兮长相忆，短相思兮无穷极，&lt;br&gt;早知如此绊人心，何如当初莫相识。&lt;/p&gt;
&lt;
      
    
    </summary>
    
      <category term="Linux" scheme="http://fireworksrain.com/categories/Linux/"/>
    
    
      <category term="nginx" scheme="http://fireworksrain.com/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>linux下的python</title>
    <link href="http://fireworksrain.com/linux%E4%B8%8B%E7%9A%84python/"/>
    <id>http://fireworksrain.com/linux下的python/</id>
    <published>2018-11-21T17:51:33.000Z</published>
    <updated>2018-11-23T00:55:10.321Z</updated>
    
    <content type="html"><![CDATA[<p>将进酒</p><p>唐代：李白</p><p>君不见，黄河之水天上来，奔流到海不复回。<br>君不见，高堂明镜悲白发，朝如青丝暮成雪。<br>人生得意须尽欢，莫使金樽空对月。<br>天生我材必有用，千金散尽还复来。<br>烹羊宰牛且为乐，会须一饮三百杯。<br>岑夫子，丹丘生，将进酒，杯莫停。<br>与君歌一曲，请君为我倾耳听。<br>钟鼓馔玉不足贵，但愿长醉不复醒。<br>古来圣贤皆寂寞，惟有饮者留其名。<br>陈王昔时宴平乐，斗酒十千恣欢谑。<br>主人何为言少钱，径须沽取对君酌。<br>五花马，千金裘，呼儿将出换美酒，与尔同销万古愁。</p><h1 id="在Linux中安装Python的操作步骤"><a href="#在Linux中安装Python的操作步骤" class="headerlink" title="在Linux中安装Python的操作步骤"></a>在Linux中安装Python的操作步骤</h1><h3 id="1-安装Python前的环境准备，非常非常重要！！！！"><a href="#1-安装Python前的环境准备，非常非常重要！！！！" class="headerlink" title="1.安装Python前的环境准备，非常非常重要！！！！"></a>1.安装Python前的环境准备，非常非常重要！！！！</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install </span>gcc patch libffi-devel python-devel  zlib-devel <span class="keyword">bzip2-devel </span>openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel -y</span><br></pre></td></tr></table></figure><h3 id="2-下载安装源码包"><a href="#2-下载安装源码包" class="headerlink" title="2.下载安装源码包"></a>2.下载安装源码包</h3><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.python.org/ftp/python/<span class="number">3.4</span><span class="meta">.7</span>/Python-<span class="number">3.4</span><span class="meta">.7</span>.tar.xzxz -d Python-<span class="number">3.4</span><span class="meta">.7</span>.tar.xztar -xf Python-<span class="number">3.4</span><span class="meta">.7</span>.tar</span><br></pre></td></tr></table></figure><p>在opt的文件夹下执行此代码<br><code>[root@localhost opt]# wget https://www.python.org/ftp/python/3.4.7/Python-3.4.7.tar.xzxz -d Python-3.4.7.tar.xztar -xf Python-3.4.7.tar</code></p><h3 id="3解压python源代码"><a href="#3解压python源代码" class="headerlink" title="3解压python源代码"></a>3解压python源代码</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">xz</span> <span class="selector-tag">-d</span> <span class="selector-tag">Python-3</span><span class="selector-class">.4</span><span class="selector-class">.7</span><span class="selector-class">.tar</span><span class="selector-class">.xz</span></span><br><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">-xf</span> <span class="selector-tag">Python-3</span><span class="selector-class">.4</span><span class="selector-class">.7</span><span class="selector-class">.tar</span></span><br></pre></td></tr></table></figure><p>在opt的文件夹中操作<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[root@localhost opt]</span># <span class="selector-tag">xz</span> <span class="selector-tag">-d</span> <span class="selector-tag">Python-3</span><span class="selector-class">.4</span><span class="selector-class">.7</span><span class="selector-class">.tar</span><span class="selector-class">.xz</span></span><br><span class="line"><span class="selector-attr">[root@localhost opt]</span># <span class="selector-tag">tar</span> <span class="selector-tag">-xf</span> <span class="selector-tag">Python-3</span><span class="selector-class">.4</span><span class="selector-class">.7</span><span class="selector-class">.tar</span></span><br></pre></td></tr></table></figure></p><h3 id="4-切换进入python源码目录"><a href="#4-切换进入python源码目录" class="headerlink" title="4.切换进入python源码目录"></a>4.切换进入python源码目录</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/opt/Python-3.4.7</span></span><br></pre></td></tr></table></figure><h3 id="5-开始编译安装，释放编译文件"><a href="#5-开始编译安装，释放编译文件" class="headerlink" title="5.开始编译安装，释放编译文件"></a>5.开始编译安装，释放编译文件</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.<span class="regexp">/configure --prefix=/</span>opt<span class="regexp">/python347/</span>    <span class="comment">#此时还不会生成这个文件夹！</span></span><br></pre></td></tr></table></figure><p>在opt文件夹下的Python-3.4.7运行<br><code>[root@localhost Python-3.4.7]# ./configure --prefix=/opt/python347/</code></p><h3 id="6-开始编译，编译安装-两种"><a href="#6-开始编译，编译安装-两种" class="headerlink" title="6.开始编译，编译安装(两种)"></a>6.开始编译，编译安装(两种)</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span></span><br><span class="line"> <span class="built_in">make</span> </span><br><span class="line"><span class="built_in">make</span> install     <span class="meta">#直到这两步走完，才会生成。创建 /opt/python347/</span></span><br><span class="line"><span class="number">2.</span></span><br><span class="line"><span class="built_in">make</span> &amp;&amp; <span class="built_in">make</span> install</span><br></pre></td></tr></table></figure><p>继续在opt文件夹下的Python-3.4.7运行<br><code>[root@localhost Python-3.4.7]# make &amp;&amp; make install</code></p><blockquote><p>到这就可以运行python了<br>到opt文件夹下的python347文件夹下的bin目录中输入./python3<br>这是就会出现非常熟悉有感觉的界面<br>接下来就为了创建快捷方式</p></blockquote><h3 id="8-配置软连接，快捷启动python3和pip3"><a href="#8-配置软连接，快捷启动python3和pip3" class="headerlink" title="8.配置软连接，快捷启动python3和pip3"></a>8.配置软连接，快捷启动python3和pip3</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s <span class="meta-keyword">/opt/</span>python347<span class="meta-keyword">/bin/</span>python3    <span class="meta-keyword">/usr/</span>bin/python3</span><br><span class="line">ln -s <span class="meta-keyword">/opt/</span>python347<span class="meta-keyword">/bin/</span>pip3  <span class="meta-keyword">/usr/</span>bin/pip3</span><br></pre></td></tr></table></figure><blockquote><p>在根目录下执行软连接：ln -s /opt/python347/bin/python3    /usr/bin/python3<br>在根目录继续创建软链接：ln -s /opt/python347/bin/pip3  /usr/bin/pip3</p></blockquote><h3 id="9-配置系统环境变量，配置PATH，加入python3的目录-目的跟上一步相同-配置环境变量须谨慎"><a href="#9-配置系统环境变量，配置PATH，加入python3的目录-目的跟上一步相同-配置环境变量须谨慎" class="headerlink" title="9. 配置系统环境变量，配置PATH，加入python3的目录(目的跟上一步相同)配置环境变量须谨慎"></a>9. 配置系统环境变量，配置PATH，加入python3的目录(目的跟上一步相同)配置环境变量须谨慎</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.最好用这一步</span><br><span class="line">PATH=<span class="regexp">/opt/python</span>347/bin/<span class="symbol">:/usr/local/sbin</span><span class="symbol">:/usr/local/bin</span><span class="symbol">:/usr/sbin</span><span class="symbol">:/usr/bin</span><span class="symbol">:/root/bin</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.尽量不用</span><br><span class="line">PATH=<span class="variable">$PATH</span><span class="symbol">:/opt/python347/bin/</span></span><br><span class="line">将上面的写入到个人配置文件中，永久生效</span><br><span class="line">vim /etc/profile  <span class="comment">#编辑个人配置文件，写入PATH</span></span><br><span class="line">PATH=<span class="variable">$PATH</span><span class="symbol">:/opt/python347/bin/</span></span><br><span class="line">source /etc/profile  <span class="comment">#读取一下配置文件，生效配置</span></span><br></pre></td></tr></table></figure><h3 id="运行时遇到问题"><a href="#运行时遇到问题" class="headerlink" title="运行时遇到问题"></a>运行时遇到问题</h3><blockquote><p>网页访问不到 ：ptables -F  </p><ul><li>setenforce 0</li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;将进酒&lt;/p&gt;
&lt;p&gt;唐代：李白&lt;/p&gt;
&lt;p&gt;君不见，黄河之水天上来，奔流到海不复回。&lt;br&gt;君不见，高堂明镜悲白发，朝如青丝暮成雪。&lt;br&gt;人生得意须尽欢，莫使金樽空对月。&lt;br&gt;天生我材必有用，千金散尽还复来。&lt;br&gt;烹羊宰牛且为乐，会须一饮三百杯。&lt;br&gt;岑夫子，丹
      
    
    </summary>
    
      <category term="Linux" scheme="http://fireworksrain.com/categories/Linux/"/>
    
    
      <category term="linux" scheme="http://fireworksrain.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://fireworksrain.com/hello-world/"/>
    <id>http://fireworksrain.com/hello-world/</id>
    <published>2018-11-21T14:34:14.754Z</published>
    <updated>2018-11-21T14:34:14.754Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
  </entry>
  
</feed>
